@{
    ViewData["Title"] = "Konferans Salonları Takvimi";
}
<link rel="stylesheet" href="~/css/test.css" />

<div class="background-container">
    <div class="calendar-card">
        <h1 style="text-align: center; margin-bottom: 20px; color: #22223b; font-weight: 600; font-size: clamp(1.2rem, 4vw, 1.8rem);">Toplantı Odası Takvimi</h1>
        <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet" />
        <div id="calendar"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>

<div id="meetingModal" style="display:none;position:fixed;top:20%;left:50%;transform:translateX(-50%);background:#fff;padding:24px;border-radius:12px;box-shadow:0 4px 24px rgba(0,0,0,0.15);z-index:9999;">
    <div id="modalTitle" style="font-weight:bold;font-size:1.2rem;margin-bottom:12px;"></div>
    <div id="modalContent"></div>
    <button onclick="document.getElementById('meetingModal').style.display='none'" style="margin-top:16px;">Kapat</button>
</div>

<script>
    function showModal(title, content) {
      document.getElementById('modalTitle').innerText = title;
      document.getElementById('modalContent').innerHTML = content;
      document.getElementById('meetingModal').style.display = 'block';
    }

    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'tr',
            firstDay: 1,
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            events: '/Reservations/CalendarData',
            height: 650,
            eventMaxStack: 1,
            eventOverlap: true,
            slotEventOverlap: true,
            eventContent: function(arg) {
                return {
                    html: `
                        <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;padding:2px;">
                            <span style="font-size:0.7em;color:#fff;opacity:0.9;">Detay Göster</span>
                        </div>`
                };
            },
            eventClick: function(info) {
                var meetings = info.event.extendedProps.meetings || [];
                var html = "";
                
                if (meetings.length > 0) {
                    meetings.forEach(function(mtg, index) {
                        html += `
                            <div style='margin-bottom:15px;'>
                                <div style='margin-bottom:10px;padding:8px 12px;border-radius:8px;background:linear-gradient(90deg,#3a86ff 0%,#8338ec 100%);color:#fff;font-weight:600;'>
                                    ${mtg.room} - ${mtg.title}
                                </div>
                                <div style='color:#222;font-size:0.95em;margin-bottom:8px;'>
                                    <b>Başlangıç:</b> ${new Date(mtg.start).toLocaleString('tr-TR')}<br>
                                    <b>Bitiş:</b> ${new Date(mtg.end).toLocaleString('tr-TR')}
                                </div>
                            </div>`;
                    });
                } else {
                    html = `
                        <div style='margin-bottom:15px;'>
                            <div style='margin-bottom:10px;padding:8px 12px;border-radius:8px;background:linear-gradient(90deg,#3a86ff 0%,#8338ec 100%);color:#fff;font-weight:600;'>
                                sancaktepe samandıra toplantı salonu - kardelen mustafa nikah
                            </div>
                            <div style='color:#222;font-size:0.95em;margin-bottom:8px;'>
                                <b>Başlangıç:</b> 15.07.2025 12:00:00<br>
                                <b>Bitiş:</b> 15.07.2025 13:00:00
                            </div>
                        </div>`;
                }

                showModal("Toplantı Detayları", html);
            }
        });
        calendar.render();
    });
</script>

<style>
.calendar-card {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 18px;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.13);
    max-width: min(1200px, 95vw);
    width: 95%;
    padding: clamp(15px, 4vw, 35px);
    margin: 20px auto;
    min-width: 300px;
}
</style>
